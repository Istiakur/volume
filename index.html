<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Animated Jug Pouring with Hand</title>
  <style>
    body {
      margin: 0;
      background: #eaeaea;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: sans-serif;
    }
    .container {
      position: relative;
      width: 500px;
      height: 500px;
      background: #f7f7f7;
      border: 2px solid #ccc;
      border-radius: 10px;
      overflow: hidden;
    }
    /* Glass styling */
    .glass {
      position: absolute;
      bottom: 30px;
      right: 50px;
      width: 80px;
      height: 150px;
      border: 2px solid rgba(255,255,255,0.8);
      border-radius: 0 0 10px 10px;
      background: rgba(255,255,255,0.2);
      box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
      overflow: hidden;
    }
    .glass .water {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: #00aaff;
      height: 0%;
      transition: height 0.6s ease-in-out;
    }
    /* Jug styling */
    .jug {
      position: absolute;
      bottom: 30px;
      left: 50px;
      width: 70px;
      height: 120px;
      background: linear-gradient(to bottom, #fff, #ddd);
      border: 2px solid #aaa;
      border-radius: 10px;
      transform-origin: bottom left;
      transition: transform 0.6s ease;
      cursor: pointer;
    }
    /* Jug handle */
    .jug::after {
      content: '';
      position: absolute;
      top: 30px;
      right: -20px;
      width: 20px;
      height: 40px;
      border: 2px solid #aaa;
      border-left: none;
      border-radius: 0 10px 10px 0;
    }
    /* Pouring state for jug (tilted) */
    .jug.pouring {
      transform: rotate(-45deg);
    }
    /* Hand styling */
    .hand {
      position: absolute;
      font-size: 40px;
      opacity: 0;
      transition: opacity 0.4s ease, transform 0.4s ease;
      /* The hand is represented by an emoji; you can replace it with an image if desired */
    }
    /* Water drop styling */
    .water-drop {
      position: absolute;
      width: 8px;
      height: 8px;
      background: #00aaff;
      border-radius: 50%;
      opacity: 1;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Glass -->
    <div class="glass">
      <div class="water"></div>
    </div>
    <!-- Jug -->
    <div class="jug" id="jug"></div>
    <!-- Hand (initially hidden) -->
    <div class="hand" id="hand">âœ‹</div>
  </div>

  <script>
    let volume = 0; // Glass water volume percentage (0 to 100)
    const jug = document.getElementById('jug');
    const hand = document.getElementById('hand');
    const waterElement = document.querySelector('.glass .water');
    const container = document.querySelector('.container');

    jug.addEventListener('click', pourWater);
    let animating = false;

    function updateWaterLevel() {
      waterElement.style.height = volume + '%';
    }

    function pourWater() {
      if (animating || volume >= 100) return;
      animating = true;
      
      // Position the hand near the jug to simulate a grab.
      const jugRect = jug.getBoundingClientRect();
      const containerRect = container.getBoundingClientRect();
      hand.style.left = (jugRect.left - containerRect.left - 10) + 'px';
      hand.style.top = (jugRect.top - containerRect.top - 40) + 'px';
      hand.style.opacity = 1;
      
      // After a short delay, tilt the jug and animate a water drop.
      setTimeout(() => {
        jug.classList.add('pouring');
        animateWaterDrop();
      }, 400);
      
      // After pouring, update the glass water level, then revert the jug and hide the hand.
      setTimeout(() => {
        volume = Math.min(volume + 10, 100);
        updateWaterLevel();
        jug.classList.remove('pouring');
        hand.style.opacity = 0;
        animating = false;
      }, 1200);
    }

    function animateWaterDrop() {
      const glass = document.querySelector('.glass');
      const glassRect = glass.getBoundingClientRect();
      const jugRect = jug.getBoundingClientRect();
      const containerRect = container.getBoundingClientRect();
      
      // Start point: approximate the jug's spout.
      const startX = jugRect.left + jugRect.width - 10 - containerRect.left;
      const startY = jugRect.top + 30 - containerRect.top;
      // End point: near the top center of the glass.
      const endX = glassRect.left + glassRect.width / 2 - containerRect.left - 4;
      const endY = glassRect.top - containerRect.top + 10;
      
      const drop = document.createElement('div');
      drop.classList.add('water-drop');
      drop.style.left = startX + 'px';
      drop.style.top = startY + 'px';
      container.appendChild(drop);
      
      // Force reflow to start the transition.
      drop.offsetWidth;
      drop.style.transition = 'all 0.6s ease-in';
      drop.style.left = endX + 'px';
      drop.style.top = endY + 'px';
      drop.style.opacity = 0;
      
      drop.addEventListener('transitionend', () => {
        drop.remove();
      });
    }
  </script>
</body>
</html>
